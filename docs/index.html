

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tebetebe: routing analysis with OSM &mdash; tebetebe  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> tebetebe
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">tebetebe: routing analysis with OSM</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#simple-scenario">Simple Scenario</a></li>
<li><a class="reference internal" href="#scenario-comparison">Scenario Comparison</a></li>
<li><a class="reference internal" href="#access-isochrones">Access Isochrones</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-documentation">API Documentation</a><ul>
<li><a class="reference internal" href="#module-tebetebe.Scenario">tb.Scenario</a></li>
<li><a class="reference internal" href="#module-tebetebe.OSMDataset">tb.OSMDataset</a></li>
<li><a class="reference internal" href="#tb-routingprofile">tb.RoutingProfile</a></li>
<li><a class="reference internal" href="#module-tebetebe.POIDataset">tb.POIDataset</a></li>
<li><a class="reference internal" href="#module-tebetebe.Environment">tb.Environment</a></li>
<li><a class="reference internal" href="#module-tebetebe.OSRM">tb.OSRM</a></li>
</ul>
</li>
<li><a class="reference internal" href="#analysis-plugins">Analysis Plugins</a><ul>
<li><a class="reference internal" href="#tb-analysis-accessisochrone">tb.analysis.AccessIsochrone</a></li>
<li><a class="reference internal" href="#tb-analysis-parallelscenarios">tb.analysis.ParallelScenarios</a></li>
<li><a class="reference internal" href="#tb-analysis-routecomparison">tb.analysis.RouteComparison</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">tebetebe</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>tebetebe: routing analysis with OSM</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tebetebe-routing-analysis-with-osm">
<h1>tebetebe: routing analysis with OSM<a class="headerlink" href="#tebetebe-routing-analysis-with-osm" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/1papaya/tebetebe">tebetebe</a> is a Python API to compile, serve, and query routable networks using the <a class="reference external" href="https://project-osrm.org">Open Source Routing Machine</a> (OSRM) and <a class="reference external" href="https://openstreetmap.org">OpenStreetMap</a> data, and provides a framework for routing analysis using these networks.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install-osrm-backend-binaries">
<h3>1. Install <a class="reference external" href="https://github.com/Project-OSRM/osrm-backend/">osrm-backend</a> binaries<a class="headerlink" href="#install-osrm-backend-binaries" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li><p>See the <a class="reference external" href="https://github.com/Project-OSRM/osrm-backend/wiki/Building-OSRM">osrm-backend wiki for instructions</a> on how to build and install from source.</p></li>
<li><p>Note that the <cite>osrm-backend</cite> Docker images are not supported for use with tebetebe.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="clone-tebetebe-source-code-and-install">
<h3>2. Clone <a class="reference external" href="https://github.com/1papaya/tebetebe">tebetebe</a> source code and install<a class="headerlink" href="#clone-tebetebe-source-code-and-install" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/1papaya/tebetebe.git
python3 setup.py install
</pre></div>
</div>
</div></blockquote>
<p><em>note:</em> tebetebe will not work on Windows machines</p>
</div>
</div>
</div>
<div class="section" id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="simple-scenario">
<h2>Simple Scenario<a class="headerlink" href="#simple-scenario" title="Permalink to this headline">¶</a></h2>
<p>This example uses the eSwatini GeoFabrik extract and the <a class="reference external" href="https://github.com/Project-OSRM/osrm-backend/blob/master/profiles/foot.lua">default walking profile</a> to calculate a walking route between Simunye and Mbabane.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tebetebe.profiles</span> <span class="k">import</span> <span class="n">foot</span>
<span class="kn">import</span> <span class="nn">tebetebe</span> <span class="k">as</span> <span class="nn">tb</span>

<span class="n">tb_env</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">tmp_dir</span><span class="o">=</span><span class="s2">&quot;./tmp/simple_scenario&quot;</span><span class="p">)</span>

<span class="n">mbabane</span> <span class="o">=</span> <span class="p">(</span><span class="mf">31.1367</span><span class="p">,</span> <span class="o">-</span><span class="mf">26.3054</span><span class="p">)</span>
<span class="n">simunye</span> <span class="o">=</span> <span class="p">(</span><span class="mf">31.9274</span><span class="p">,</span> <span class="o">-</span><span class="mf">26.2108</span><span class="p">)</span>

<span class="c1">## Initialize scenario using eSwatini GeoFabrik extract and default foot profile</span>
<span class="n">scenario</span> <span class="o">=</span> <span class="n">tb_env</span><span class="o">.</span><span class="n">Scenario</span><span class="p">(</span><span class="s2">&quot;./tmp/swaziland-latest.osm.pbf&quot;</span><span class="p">,</span> <span class="n">foot</span><span class="p">)</span>

<span class="c1">## Compile and run scenario</span>
<span class="k">with</span> <span class="n">scenario</span><span class="p">()</span> <span class="k">as</span> <span class="n">api</span><span class="p">:</span>
    <span class="c1">## Query OSRM HTTP `simple_route` service to calculate route</span>
    <span class="n">route</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">simple_route</span><span class="p">(</span><span class="n">simunye</span><span class="p">,</span> <span class="n">mbabane</span><span class="p">)</span>

    <span class="n">duration</span> <span class="o">=</span> <span class="n">route</span><span class="p">[</span><span class="s1">&#39;routes&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">60</span>
    <span class="n">distance</span> <span class="o">=</span> <span class="n">route</span><span class="p">[</span><span class="s1">&#39;routes&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;distance&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="mi">1000</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Walking from Simunye to Mbabane&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; Duration: </span><span class="si">{:.2f}</span><span class="s2"> minutes&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">duration</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; Distance: </span><span class="si">{:.2f}</span><span class="s2"> km&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">distance</span><span class="p">))</span>
</pre></div>
</div>
<div class="literal-block-wrapper docutils container" id="id12">
<div class="code-block-caption"><span class="caption-text">Simple Scenario output</span><a class="headerlink" href="#id12" title="Permalink to this code">¶</a></div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span> <span class="o">[</span>   INFO<span class="o">]</span> swaziland-latest_foot: Compiling scenario <span class="o">(</span>MLD<span class="o">)</span>
 <span class="o">[</span>WARNING<span class="o">]</span> swaziland-latest_foot: Default foot profile may not be accurate <span class="k">for</span> your use <span class="k">case</span>
 <span class="o">[</span>   INFO<span class="o">]</span> swaziland-latest_foot: Initializing scenario
 <span class="o">[</span>   INFO<span class="o">]</span> swaziland-latest_foot: Ready <span class="k">for</span> requests
 Walking from Simunye to Mbabane
  Duration: <span class="m">1420</span>.70 minutes
  Distance: <span class="m">118</span>.39 km
</pre></div>
</div>
</div>
</div>
<div class="section" id="scenario-comparison">
<h2>Scenario Comparison<a class="headerlink" href="#scenario-comparison" title="Permalink to this headline">¶</a></h2>
<p>By comparing origin:destination routes between different scenarios, we gain insight about how changing a transportation scenario affects route patterns.</p>
<p>Here, we compare routes calculated by two different Scenarios: a “normal” walking scenario, and a “flood” scenario, to understand the impact of a flooding event on access to local schools in eSwatini. The route network is taken from the eSwatini GeoFabrik extract, and the homesteads (origins) and schools (destinations) are downloaded from the Overpass API.</p>
<p>The “normal”  and “flood” scenarios in this case are both the default walk profile, except that the “flood” scenaro considers nodes with <code class="docutils literal notranslate"><span class="pre">ford=yes</span></code> (river crossings), and ways with <code class="docutils literal notranslate"><span class="pre">flood_prone=yes</span></code> to be a barrier. Check out their source in <a class="reference external" href="https://github.com/1papaya/tebetebe/tree/master/examples">the GitHub repo</a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tebetebe.analysis</span> <span class="k">import</span> <span class="n">ParallelScenarios</span><span class="p">,</span> <span class="n">RouteComparison</span>
<span class="kn">import</span> <span class="nn">tebetebe</span> <span class="k">as</span> <span class="nn">tb</span>

<span class="n">tb_env</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">tmp_dir</span><span class="o">=</span><span class="s2">&quot;./tmp/scenario_comparison&quot;</span><span class="p">)</span>

<span class="c1">## Get route network from GeoFabrik extract and POIs from Overpass API</span>
<span class="c1">## Load the route origins (homesteads) and dests (schools) 8km around river crossing</span>
<span class="n">crossing_node_id</span> <span class="o">=</span> <span class="mi">6750683291</span>
<span class="n">highways</span> <span class="o">=</span> <span class="n">tb_env</span><span class="o">.</span><span class="n">OSMDataset</span><span class="p">(</span><span class="s2">&quot;./tmp/swaziland-latest.osm.pbf&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;swazi&quot;</span><span class="p">)</span>
<span class="n">homesteads</span> <span class="o">=</span> <span class="n">tb_env</span><span class="o">.</span><span class="n">POIDataset</span><span class="o">.</span><span class="n">from_overpass</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;node(</span><span class="si">{}</span><span class="s2">)-&gt;.crossing;</span>
<span class="s2">                                                 ( way(around.crossing:8000)[&quot;building&quot;];);</span>
<span class="s2">                                                out center;&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">crossing_node_id</span><span class="p">),</span>
                                             <span class="n">name</span><span class="o">=</span><span class="s2">&quot;homesteads&quot;</span><span class="p">)</span>
<span class="n">schools</span> <span class="o">=</span> <span class="n">tb_env</span><span class="o">.</span><span class="n">POIDataset</span><span class="o">.</span><span class="n">from_overpass</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;node(</span><span class="si">{}</span><span class="s2">)-&gt;.crossing;</span>
<span class="s2">                                                 ( way(around.crossing:8000)[&quot;amenity&quot;=&quot;school&quot;];);</span>
<span class="s2">                                                out center;&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">crossing_node_id</span><span class="p">),</span>
                                          <span class="n">name</span><span class="o">=</span><span class="s2">&quot;schools&quot;</span><span class="p">)</span>

<span class="c1">## Normal &amp; Flood scenarios. Pass along an extra parameter to osrm-routed</span>
<span class="c1">## so that the max duration table size is enough for all origin:dest pairs</span>
<span class="n">routed_args</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;max_table_size&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">homesteads</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">schools</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span>

<span class="n">normal</span> <span class="o">=</span> <span class="n">tb_env</span><span class="o">.</span><span class="n">Scenario</span><span class="p">(</span><span class="n">highways</span><span class="p">,</span> <span class="s2">&quot;./profiles/walk_normal.lua&quot;</span><span class="p">,</span>
                         <span class="n">routed_args</span><span class="o">=</span><span class="n">routed_args</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">)</span>
<span class="n">flood</span> <span class="o">=</span> <span class="n">tb_env</span><span class="o">.</span><span class="n">Scenario</span><span class="p">(</span><span class="n">highways</span><span class="p">,</span> <span class="s2">&quot;./profiles/walk_flood.lua&quot;</span><span class="p">,</span>
                        <span class="n">routed_args</span><span class="o">=</span><span class="n">routed_args</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;flood&quot;</span><span class="p">)</span>

<span class="c1">## Run normal and flood scenarios in parallel</span>
<span class="n">parallel_scenarios</span> <span class="o">=</span> <span class="n">ParallelScenarios</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">flood</span><span class="p">)</span>

<span class="k">with</span> <span class="n">parallel_scenarios</span> <span class="k">as</span> <span class="n">scenarios</span><span class="p">:</span>
    <span class="c1">## Compare origin:dest routes</span>
    <span class="n">comparison</span> <span class="o">=</span> <span class="n">RouteComparison</span><span class="p">(</span><span class="n">origins</span><span class="o">=</span><span class="n">homesteads</span><span class="p">,</span> <span class="n">dests</span><span class="o">=</span><span class="n">schools</span><span class="p">)</span>

    <span class="c1">## Routes that are different between scenarios</span>
    <span class="n">flood_affected</span> <span class="o">=</span> <span class="n">comparison</span><span class="o">.</span><span class="n">get_difference</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">flood</span><span class="p">)</span>

    <span class="c1">## Point dataframe of all homesteads who are flood affected</span>
    <span class="n">homesteads</span><span class="p">[</span><span class="n">homesteads</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">flood_affected</span><span class="p">[</span><span class="s1">&#39;origin_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())]</span> \
        <span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">tb_env</span><span class="o">.</span><span class="n">tmp_dir</span> <span class="o">/</span> <span class="s2">&quot;flood_affected_homesteads.geojson&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>

    <span class="c1">## Routes of all flood affected homesteads under normal conditions</span>
    <span class="n">comparison</span><span class="o">.</span><span class="n">get_routes</span><span class="p">(</span><span class="n">normal</span><span class="p">,</span> <span class="n">od_pairs</span><span class="o">=</span><span class="n">flood_affected</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">tb_env</span><span class="o">.</span><span class="n">tmp_dir</span> <span class="o">/</span> <span class="s2">&quot;flood_affected_normal_routes.geojson&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>

    <span class="c1">## Routes of all flood affected homesteads under flood conditions</span>
    <span class="n">comparison</span><span class="o">.</span><span class="n">get_routes</span><span class="p">(</span><span class="n">flood</span><span class="p">,</span> <span class="n">od_pairs</span><span class="o">=</span><span class="n">flood_affected</span><span class="p">)</span> \
        <span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">tb_env</span><span class="o">.</span><span class="n">tmp_dir</span> <span class="o">/</span> <span class="s2">&quot;flood_affected_flood_routes.geojson&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="literal-block-wrapper docutils container" id="id13">
<div class="code-block-caption"><span class="caption-text">Scenario Comparison output</span><a class="headerlink" href="#id13" title="Permalink to this code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> [   INFO] Downloading POIDataset homesteads
 [   INFO] Downloading POIDataset schools
 [   INFO] normal: Compiling scenario (MLD)
 [   INFO] normal: Initializing scenario
 [   INFO] normal: Ready for requests
 [   INFO] flood: Compiling scenario (MLD)
 [   INFO] flood: Initializing scenario
 [   INFO] flood: Ready for requests
</pre></div>
</div>
</div>
</div>
<div class="section" id="access-isochrones">
<h2>Access Isochrones<a class="headerlink" href="#access-isochrones" title="Permalink to this headline">¶</a></h2>
<p>Here a route network is extracted from the eSwatini <a class="reference external" href="http://download.geofabrik.de">GeoFabrik extract</a> and an AccessIsochrone is calculated using the default <a class="reference external" href="https://github.com/Project-OSRM/osrm-backend/blob/master/profiles/foot.lua">car profile</a>. The AccessIsochrone class is provided by the <a class="reference external" href="https://github.com/ustroetz/python-osrm">python-osrm package</a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tebetebe.analysis</span> <span class="k">import</span> <span class="n">AccessIsochrone</span>
<span class="kn">from</span> <span class="nn">tebetebe.profiles</span> <span class="k">import</span> <span class="n">car</span>
<span class="kn">import</span> <span class="nn">tebetebe</span> <span class="k">as</span> <span class="nn">tb</span>

<span class="n">tb_env</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">Environment</span><span class="p">(</span><span class="n">tmp_dir</span><span class="o">=</span><span class="s2">&quot;./tmp/access_isochrones&quot;</span><span class="p">)</span>
<span class="n">mbabane</span> <span class="o">=</span> <span class="p">(</span><span class="mf">31.1367</span><span class="p">,</span> <span class="o">-</span><span class="mf">26.3054</span><span class="p">)</span>

<span class="c1">## Initialize scenario with GeoFabrik extract and default car profile</span>
<span class="n">scenario</span> <span class="o">=</span> <span class="n">tb_env</span><span class="o">.</span><span class="n">Scenario</span><span class="p">(</span><span class="s2">&quot;./tmp/swaziland-latest.osm.pbf&quot;</span><span class="p">,</span> <span class="n">car</span><span class="p">)</span>

<span class="c1">## Compile and run scenario</span>
<span class="k">with</span> <span class="n">scenario</span><span class="p">()</span> <span class="k">as</span> <span class="n">api</span><span class="p">:</span>
    <span class="n">isochrone</span> <span class="o">=</span> <span class="n">AccessIsochrone</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">mbabane</span><span class="p">,</span> <span class="n">points_grid</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">contours</span> <span class="o">=</span> <span class="n">isochrone</span><span class="o">.</span><span class="n">render_contour</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

    <span class="c1">## Save contours as GeoJSON for visualization with QGIS</span>
    <span class="n">contours</span><span class="o">.</span><span class="n">to_file</span><span class="p">(</span><span class="n">tb_env</span><span class="o">.</span><span class="n">tmp_dir</span> <span class="o">/</span> <span class="s2">&quot;contour10.geojson&quot;</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;GeoJSON&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="literal-block-wrapper docutils container" id="id14">
<div class="code-block-caption"><span class="caption-text">Access Isochrones output</span><a class="headerlink" href="#id14" title="Permalink to this code">¶</a></div>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span> [   INFO] swaziland-latest_car: Compiling scenario (MLD)
 [WARNING] swaziland-latest_car: Default car profile may not be accurate for your use case
 [   INFO] swaziland-latest_car: Initializing scenario
 [   INFO] swaziland-latest_car: Ready for requests
</pre></div>
</div>
</div>
<div class="figure align-default" id="id15">
<a class="reference internal image-reference" href="_static/img/mbabane_isochrone.png"><img alt="_static/img/mbabane_isochrone.png" src="_static/img/mbabane_isochrone.png" style="width: 250px; height: 250px;" /></a>
<p class="caption"><span class="caption-text">Result visualized over OSM Carto basemap</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="api-documentation">
<h1>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-tebetebe.Scenario">
<span id="tb-scenario"></span><h2>tb.Scenario<a class="headerlink" href="#module-tebetebe.Scenario" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="tebetebe.Scenario.Scenario">
<em class="property">class </em><code class="sig-prename descclassname">tebetebe.Scenario.</code><code class="sig-name descname">Scenario</code><span class="sig-paren">(</span><em class="sig-param">osm_dataset</em>, <em class="sig-param">routing_profile</em>, <em class="sig-param">name=None</em>, <em class="sig-param">algorithm='MLD'</em>, <em class="sig-param">tmp_dir=PosixPath('/tmp')</em>, <em class="sig-param">overwrite=False</em>, <em class="sig-param">verbose=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/Scenario.html#Scenario"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.Scenario.Scenario" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Scenario is an abstraction of OSRM executables in order to compile, serve, and query
a routable network.</p>
<p>A Scenario is initialized with (1) an OSM Dataset and (2) a Routing Profile. When called,
Scenario compiles the OSMDataset and RoutingProfile into an OSRM routable network,
provides a context manager to serve the scenario’s HTTP API, and returns various methods
to query that API.</p>
<p>The HTTP API methods (<cite>match</cite>, <cite>nearest</cite>, <cite>simple_route</cite>, <cite>table</cite>, <cite>trip</cite>) are provided by
the <cite>python-osrm</cite> module (<a class="reference external" href="https://github.com/ustroetz/python-osrm">https://github.com/ustroetz/python-osrm</a>)</p>
<p class="rubric">Example</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tebetebe.profiles</span> <span class="k">import</span> <span class="n">foot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tebetebe</span> <span class="k">as</span> <span class="nn">tb</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">## initialize scenario with GeoFabrik extract &amp; default foot profile</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scenario</span> <span class="o">=</span> <span class="n">tb</span><span class="o">.</span><span class="n">Scenario</span><span class="p">(</span><span class="s2">&quot;./swaziland-latest.osm.pbf&quot;</span><span class="p">,</span> <span class="n">foot</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">scenario</span><span class="p">()</span> <span class="k">as</span> <span class="n">api</span><span class="p">:</span> <span class="c1">## compile scenario and serve HTTP API</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">api</span><span class="o">.</span><span class="n">simple_route</span><span class="p">()</span><span class="o">...</span> <span class="c1">## query HTTP API for a simple route, match, nearest, trip...</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>osm_dataset</strong> (<em>str / OSMDataset</em>) – OSM dataset from which the route network will be extracted</p></li>
<li><p><strong>routing_profile</strong> (<em>str / RoutingProfile</em>) – Routing profile to be used in scenario</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – Scenario name used in output file and log entries. If not supplied, it will be built
based upon the OSMDataset and RoutingProfile names</p></li>
<li><p><strong>algorithm</strong> (<em>str</em><em>, </em><em>optional</em>) – Algorithm to be used (either “CH” or “MLD”)</p></li>
<li><p><strong>tmp_dir</strong> (<em>str</em><em>, </em><em>optional</em>) – Temporary directory to store files generated by osrm binaries</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>optional</em>) – Overwrite scenario if .osrm* files already exist. Otherwise, the existing .osrm* files
will be used.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – Print output of OSRM compilation</p></li>
<li><p><strong>**kwargs</strong> – To pass any custom arguments to the OSRM executables (“osrm-routed”, “osrm-contract”, …)
pass the kwarg “{executable}_args” (ex. “routed_args”, “contract_args”, …) with a dictionary
of key:values to be passed</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="tebetebe.Scenario.Scenario.get_name">
<code class="sig-name descname">get_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/Scenario.html#Scenario.get_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.Scenario.Scenario.get_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Scenario name</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.Scenario.Scenario.get_path">
<code class="sig-name descname">get_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/Scenario.html#Scenario.get_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.Scenario.Scenario.get_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Scenario path</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.Scenario.Scenario.is_alive">
<code class="sig-name descname">is_alive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/Scenario.html#Scenario.is_alive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.Scenario.Scenario.is_alive" title="Permalink to this definition">¶</a></dt>
<dd><p>True if Scenario process is running, False otherwise</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.Scenario.Scenario.match">
<code class="sig-name descname">match</code><span class="sig-paren">(</span><em class="sig-param">steps=False</em>, <em class="sig-param">overview='simplified'</em>, <em class="sig-param">geometry='polyline'</em>, <em class="sig-param">timestamps=None</em>, <em class="sig-param">radius=None</em>, <em class="sig-param">annotations='false'</em>, <em class="sig-param">gaps='split'</em>, <em class="sig-param">tidy=False</em>, <em class="sig-param">waypoints=None</em>, <em class="sig-param">url_config=http://localhost:5000/*/v1/driving</em><span class="sig-paren">)</span><a class="headerlink" href="#tebetebe.Scenario.Scenario.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Function wrapping OSRM ‘match’ function, returning the reponse in JSON</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>points</strong> (<em>list of tuple/list of point</em>) – A sequence of points as (x ,y) where x is longitude and y is latitude.</p></li>
<li><p><strong>steps</strong> (<em>bool</em><em>, </em><em>optional</em>) – Default is False.</p></li>
<li><p><strong>overview</strong> (<em>str</em><em>, </em><em>optional</em>) – Query for the geometry overview, either “simplified”, “full” or “false”
(Default: “simplified”)</p></li>
<li><p><strong>geometry</strong> (<em>str</em><em>, </em><em>optional</em>) – Format in which decode the geometry, either “polyline” (ie. not decoded),
“geojson”, “WKT” or “WKB” (default: “polyline”).</p></li>
<li><p><strong>timestamps</strong> (<em>list of timestamp</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>radius</strong> (<em>list of float</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>annotations</strong> (<em>bool</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>gaps</strong> (<em>str</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>tidy</strong> (<em>bool</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>waypoints</strong> (<em>list of tuple/list of point</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>url_config</strong> (<em>osrm.RequestConfig</em><em>, </em><em>optional</em>) – Parameters regarding the host, version and profile to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The response from the osrm instance, parsed as a dict</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tebetebe.Scenario.Scenario.nearest">
<code class="sig-name descname">nearest</code><span class="sig-paren">(</span><em class="sig-param">number=1</em>, <em class="sig-param">url_config=http://localhost:5000/*/v1/driving</em><span class="sig-paren">)</span><a class="headerlink" href="#tebetebe.Scenario.Scenario.nearest" title="Permalink to this definition">¶</a></dt>
<dd><p>Useless function wrapping OSRM ‘nearest’ function,
returning the reponse in JSON</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coord</strong> (<em>list/tuple of two floats</em>) – (x ,y) where x is longitude and y is latitude</p></li>
<li><p><strong>number</strong> (<em>int</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>url_config</strong> (<em>osrm.RequestConfig</em><em>, </em><em>optional</em>) – Parameters regarding the host, version and profile to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – The response from the osrm instance, parsed as a dict</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tebetebe.Scenario.Scenario.simple_route">
<code class="sig-name descname">simple_route</code><span class="sig-paren">(</span><em class="sig-param">coord_dest</em>, <em class="sig-param">coord_intermediate=None</em>, <em class="sig-param">alternatives=False</em>, <em class="sig-param">steps=False</em>, <em class="sig-param">output='full'</em>, <em class="sig-param">geometry='polyline'</em>, <em class="sig-param">overview='simplified'</em>, <em class="sig-param">annotations='true'</em>, <em class="sig-param">continue_straight='default'</em>, <em class="sig-param">url_config=http://localhost:5000/*/v1/driving</em>, <em class="sig-param">send_as_polyline=True</em><span class="sig-paren">)</span><a class="headerlink" href="#tebetebe.Scenario.Scenario.simple_route" title="Permalink to this definition">¶</a></dt>
<dd><p>Function wrapping OSRM ‘viaroute’ function and returning the JSON reponse
with the route_geometry decoded (in WKT or WKB) if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coord_origin</strong> (<em>list/tuple of two floats</em>) – (x ,y) where x is longitude and y is latitude</p></li>
<li><p><strong>coord_dest</strong> (<em>list/tuple of two floats</em>) – (x ,y) where x is longitude and y is latitude</p></li>
<li><p><strong>coord_intermediate</strong> (<em>list of 2-floats list/tuple</em>) – [(x ,y), (x, y), …] where x is longitude and y is latitude</p></li>
<li><p><strong>alternatives</strong> (<em>bool</em><em>, </em><em>optional</em>) – Query (and resolve geometry if asked) for alternatives routes
(default: False)</p></li>
<li><p><strong>output</strong> (<em>str</em><em>, </em><em>optional</em>) – Define the type of output (full response or only route(s)), default : “full”.</p></li>
<li><p><strong>geometry</strong> (<em>str</em><em>, </em><em>optional</em>) – Format in which decode the geometry, either “polyline” (ie. not decoded),
“geojson”, “WKT” or “WKB” (default: “polyline”).</p></li>
<li><p><strong>annotations</strong> (<em>str</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>continue_straight</strong> (<em>str</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>overview</strong> (<em>str</em><em>, </em><em>optional</em>) – Query for the geometry overview, either “simplified”, “full” or “false”
(Default: “simplified”)</p></li>
<li><p><strong>url_config</strong> (<em>osrm.RequestConfig</em><em>, </em><em>optional</em>) – Parameters regarding the host, version and profile to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>result</strong> – The result, parsed as a dict, with the geometry decoded in the format
defined in <cite>geometry</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tebetebe.Scenario.Scenario.table">
<code class="sig-name descname">table</code><span class="sig-paren">(</span><em class="sig-param">coords_dest=None</em>, <em class="sig-param">ids_origin=None</em>, <em class="sig-param">ids_dest=None</em>, <em class="sig-param">output='np'</em>, <em class="sig-param">minutes=False</em>, <em class="sig-param">annotations='duration'</em>, <em class="sig-param">url_config=http://localhost:5000/*/v1/driving</em>, <em class="sig-param">send_as_polyline=True</em><span class="sig-paren">)</span><a class="headerlink" href="#tebetebe.Scenario.Scenario.table" title="Permalink to this definition">¶</a></dt>
<dd><p>Function wrapping OSRM ‘table’ function in order to get a matrix of
time distance as a numpy array or as a DataFrame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coords_src</strong> (<em>list</em>) – <dl class="simple">
<dt>A list of coord as (longitude, latitude) , like :</dt><dd><dl class="simple">
<dt>list_coords = [(21.3224, 45.2358),</dt><dd><p>(21.3856, 42.0094),
(20.9574, 41.5286)] (coords have to be float)</p>
</dd>
</dl>
</dd>
</dl>
</p></li>
<li><p><strong>coords_dest</strong> (<em>list</em><em>, </em><em>optional</em>) – <dl class="simple">
<dt>A list of coord as (longitude, latitude) , like :</dt><dd><dl class="simple">
<dt>list_coords = [(21.3224, 45.2358),</dt><dd><p>(21.3856, 42.0094),
(20.9574, 41.5286)] (coords have to be float)</p>
</dd>
</dl>
</dd>
</dl>
</p></li>
<li><p><strong>ids_origin</strong> (<em>list</em><em>, </em><em>optional</em>) – A list of name/id to use to label the source axis of
the result <cite>DataFrame</cite> (default: None).</p></li>
<li><p><strong>ids_dest</strong> (<em>list</em><em>, </em><em>optional</em>) – A list of name/id to use to label the destination axis of
the result <cite>DataFrame</cite> (default: None).</p></li>
<li><p><strong>output</strong> (<em>str</em><em>, </em><em>optional</em>) – <dl class="simple">
<dt>The type of annotated matrice to return (DataFrame or numpy array)</dt><dd><p>’raw’ for the (parsed) json response from OSRM
‘pandas’, ‘df’ or ‘DataFrame’ for a DataFrame
‘numpy’, ‘array’ or ‘np’ for a numpy array (default is “np”)</p>
</dd>
</dl>
</p></li>
<li><p><strong>annotations</strong> (<em>str</em><em>, </em><em>optional</em>) – Either ‘duration’ (default) or ‘distance’</p></li>
<li><p><strong>url_config</strong> (<em>osrm.RequestConfig</em><em>, </em><em>optional</em>) – Parameters regarding the host, version and profile to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>- if output==’raw’</strong> (<em>a dict, the parsed json response.</em>)</p></li>
<li><p><strong>- if output==’np’</strong> (<em>a numpy.ndarray containing the time in minutes,</em>) – a list of snapped origin coordinates,
a list of snapped destination coordinates.</p></li>
<li><p><strong>- if output==’pandas’</strong> (<em>a labeled DataFrame containing the time matrix in minutes,</em>) – a list of snapped origin coordinates,
a list of snapped destination coordinates.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tebetebe.Scenario.Scenario.trip">
<code class="sig-name descname">trip</code><span class="sig-paren">(</span><em class="sig-param">steps=False</em>, <em class="sig-param">output='full'</em>, <em class="sig-param">geometry='polyline'</em>, <em class="sig-param">overview='simplified'</em>, <em class="sig-param">roundtrip=True</em>, <em class="sig-param">source='any'</em>, <em class="sig-param">destination='any'</em>, <em class="sig-param">annotations='false'</em>, <em class="sig-param">url_config=http://localhost:5000/*/v1/driving</em>, <em class="sig-param">send_as_polyline=True</em><span class="sig-paren">)</span><a class="headerlink" href="#tebetebe.Scenario.Scenario.trip" title="Permalink to this definition">¶</a></dt>
<dd><p>Function wrapping OSRM ‘trip’ function and returning the JSON reponse
with the route_geometry decoded (in WKT or WKB) if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>coord_origin</strong> (<em>list/tuple of two floats</em>) – (x ,y) where x is longitude and y is latitude</p></li>
<li><p><strong>steps</strong> (<em>bool</em><em>, </em><em>default False</em>) – </p></li>
<li><p><strong>output</strong> (<em>str</em><em>, </em><em>default 'full'</em>) – Define the type of output (full response or only route(s))</p></li>
<li><p><strong>geometry</strong> (<em>str</em><em>, </em><em>optional</em>) – Format in which decode the geometry, either “polyline” (ie. not decoded),
“geojson”, “WKT” or “WKB” (default: “polyline”).</p></li>
<li><p><strong>overview</strong> (<em>str</em><em>, </em><em>optional</em>) – Query for the geometry overview, either “simplified”, “full” or “false”
(Default: “simplified”)</p></li>
<li><p><strong>roundtrip</strong> (<em>bool</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>source</strong> (<em>str</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>destination</strong> (<em>str</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>annotations</strong> (<em>str</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>url_config</strong> (<em>osrm.RequestConfig</em><em>, </em><em>optional</em>) – Parameters regarding the host, version and profile to use</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>- if ‘only_index’</strong> (<em>a dict containing respective indexes</em>) – of trips and waypoints</p></li>
<li><p><strong>- if ‘raw’</strong> (<em>the original json returned by OSRM</em>)</p></li>
<li><p><strong>- if ‘WKT’</strong> (<em>the json returned by OSRM with the ‘route_geometry’ converted</em>) – in WKT format</p></li>
<li><p><strong>- if ‘WKB’</strong> (<em>the json returned by OSRM with the ‘route_geometry’ converted</em>) – in WKB format</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-tebetebe.OSMDataset">
<span id="tb-osmdataset"></span><h2>tb.OSMDataset<a class="headerlink" href="#module-tebetebe.OSMDataset" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="tebetebe.OSMDataset.OSMDataset">
<em class="property">class </em><code class="sig-prename descclassname">tebetebe.OSMDataset.</code><code class="sig-name descname">OSMDataset</code><span class="sig-paren">(</span><em class="sig-param">osm_path</em>, <em class="sig-param">name=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSMDataset.html#OSMDataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSMDataset.OSMDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>OSM data file from which a route network will be extracted</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>osm_path</strong> – Path to <a href="#id2"><span class="problematic" id="id3">*</span></a>.osm{.pbf} dataset</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of OSMDataset. If not provided, the .osm filename is used.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="tebetebe.OSMDataset.OSMDataset.from_overpass">
<em class="property">classmethod </em><code class="sig-name descname">from_overpass</code><span class="sig-paren">(</span><em class="sig-param">query</em>, <em class="sig-param">name=None</em>, <em class="sig-param">overwrite=False</em>, <em class="sig-param">tmp_dir=PosixPath('/tmp')</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSMDataset.html#OSMDataset.from_overpass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSMDataset.OSMDataset.from_overpass" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an OSMDataset by downloading result of an overpass query and saving as .osm</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to be sent to overpass API. This query should <em>not</em> include an <cite>out</cite> directive (eg. [out:xml];)</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of the route network</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – Overwrite route network if it already exists on disk</p></li>
<li><p><strong>tmp_dir</strong> (<em>str</em>) – Temporary directory to save route network</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#tebetebe.OSMDataset.OSMDataset" title="tebetebe.OSMDataset.OSMDataset">OSMDataset</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tebetebe.OSMDataset.OSMDataset.get_name">
<code class="sig-name descname">get_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSMDataset.html#OSMDataset.get_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSMDataset.OSMDataset.get_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return route network name</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.OSMDataset.OSMDataset.get_path">
<code class="sig-name descname">get_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSMDataset.html#OSMDataset.get_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSMDataset.OSMDataset.get_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return route network path</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tb-routingprofile">
<h2>tb.RoutingProfile<a class="headerlink" href="#tb-routingprofile" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-tebetebe.RoutingProfile"></span><dl class="class">
<dt id="tebetebe.RoutingProfile.RoutingProfile">
<em class="property">class </em><code class="sig-prename descclassname">tebetebe.RoutingProfile.</code><code class="sig-name descname">RoutingProfile</code><span class="sig-paren">(</span><em class="sig-param">lua_path</em>, <em class="sig-param">name=None</em>, <em class="sig-param">default=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/RoutingProfile.html#RoutingProfile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.RoutingProfile.RoutingProfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A RoutingProfile is a configuration script which represents a routing behaviour, such
as for bike or car routing. It describes whether or not to traverse a particular type
of way or node in OSM data, and the speed at which those elements are traversed.</p>
<p>Check out the osrm-backend wiki for more information!
<a class="reference external" href="https://github.com/Project-OSRM/osrm-backend/wiki/Profiles">https://github.com/Project-OSRM/osrm-backend/wiki/Profiles</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lua_path</strong> (<em>str</em>) – Path to .lua configuration script</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – Name of routing profile. If not provided, the .lua filename is used.</p></li>
<li><p><strong>default</strong> (<em>bool</em><em>, </em><em>optional</em>) – If RoutingProfile is a default profile</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="tebetebe.RoutingProfile.RoutingProfile.get_name">
<code class="sig-name descname">get_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/RoutingProfile.html#RoutingProfile.get_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.RoutingProfile.RoutingProfile.get_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return name of routing profile</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.RoutingProfile.RoutingProfile.get_path">
<code class="sig-name descname">get_path</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/RoutingProfile.html#RoutingProfile.get_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.RoutingProfile.RoutingProfile.get_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return path of routing profile</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.RoutingProfile.RoutingProfile.is_default">
<code class="sig-name descname">is_default</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/RoutingProfile.html#RoutingProfile.is_default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.RoutingProfile.RoutingProfile.is_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Return if routing profile is a default or not</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-tebetebe.POIDataset">
<span id="tb-poidataset"></span><h2>tb.POIDataset<a class="headerlink" href="#module-tebetebe.POIDataset" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="tebetebe.POIDataset.POIDataset">
<em class="property">class </em><code class="sig-prename descclassname">tebetebe.POIDataset.</code><code class="sig-name descname">POIDataset</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">name=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/POIDataset.html#POIDataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.POIDataset.POIDataset" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">geopandas.geodataframe.GeoDataFrame</span></code></p>
<p>Extension of a GeoDataFrame which stores Points only, to be used as origin, destination,
and waypoints in routing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>name</strong> (<em>str</em>) – Name of POIDataset (required)</p>
</dd>
</dl>
<dl class="method">
<dt id="tebetebe.POIDataset.POIDataset.from_features">
<em class="property">classmethod </em><code class="sig-name descname">from_features</code><span class="sig-paren">(</span><em class="sig-param">features</em>, <em class="sig-param">name=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/POIDataset.html#POIDataset.from_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.POIDataset.POIDataset.from_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize POIDataset from GeoJSON features</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.POIDataset.POIDataset.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">name=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/POIDataset.html#POIDataset.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.POIDataset.POIDataset.from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize POIDataset from file. If no name is given, the filename will be used</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.POIDataset.POIDataset.from_overpass">
<em class="property">classmethod </em><code class="sig-name descname">from_overpass</code><span class="sig-paren">(</span><em class="sig-param">query</em>, <em class="sig-param">name=None</em>, <em class="sig-param">overwrite=False</em>, <em class="sig-param">tmp_dir=PosixPath('/tmp')</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/POIDataset.html#POIDataset.from_overpass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.POIDataset.POIDataset.from_overpass" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize POIDataset from Overpass API query. Any returned nodes or closed ways with <cite>center</cite> attributes will be included in the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to be sent to overpass API. This query should <em>not</em> include an <cite>out</cite> directive (eg. [out:json];)</p></li>
<li><p><strong>name</strong> (<em>str</em>) – Name of the POI dataset</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em>) – Overwrite POIDataset if it already exists on disk</p></li>
<li><p><strong>tmp_dir</strong> (<em>str</em>) – Temporary directory to save POIDataset</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tebetebe.POIDataset.POIDataset.get_name">
<code class="sig-name descname">get_name</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/POIDataset.html#POIDataset.get_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.POIDataset.POIDataset.get_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Return POI dataset name</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-tebetebe.Environment">
<span id="tb-environment"></span><h2>tb.Environment<a class="headerlink" href="#module-tebetebe.Environment" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="tebetebe.Environment.Environment">
<em class="property">class </em><code class="sig-prename descclassname">tebetebe.Environment.</code><code class="sig-name descname">Environment</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/Environment.html#Environment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.Environment.Environment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Environment is a convenience class to set default options for the <cite>tebetebe</cite> base classes.</p>
<p>Many of the <cite>tebetebe</cite> operations require writing a file to disk in order to be passed
to the OSRM executables, and it’s useful to set a uniform <cite>tmp_dir</cite> for a particular set of
commands so that all of these files generated by those commands are contained in the same place.</p>
<p>In addition to <cite>tmp_dir</cite>, any <a href="#id4"><span class="problematic" id="id5">**</span></a>kwarg passed to Environment will be passed to all of the
classes available under the Environment. Useful examples of these kwargs include <cite>verbose</cite>
and <cite>overwrite</cite></p>
<p>Any <a href="#id6"><span class="problematic" id="id7">**</span></a>kwargs set in Environment classes will be overridden if the argument is specified during
subclass initialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> – Arbitrary keyword arguments to be passed to each class available under the Environment</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-tebetebe.OSRM">
<span id="tb-osrm"></span><h2>tb.OSRM<a class="headerlink" href="#module-tebetebe.OSRM" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="tebetebe.OSRM.OSRM">
<em class="property">class </em><code class="sig-prename descclassname">tebetebe.OSRM.</code><code class="sig-name descname">OSRM</code><span class="sig-paren">(</span><em class="sig-param">verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSRM.html#OSRM"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSRM.OSRM" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Base class wrapper around all the osrm-* binaries. All functions accept
additional <a href="#id8"><span class="problematic" id="id9">**</span></a>kwargs to be passed upon execution. This class is used in
the background and need not be initialized directly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>verbose</strong> (<em>bool</em>) – Output stdout from osrm commands.</p>
</dd>
</dl>
<dl class="method">
<dt id="tebetebe.OSRM.OSRM.contract">
<code class="sig-name descname">contract</code><span class="sig-paren">(</span><em class="sig-param">osrm_file</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSRM.html#OSRM.contract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSRM.OSRM.contract" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <cite>osrm-contract</cite> on a .osrm file</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.OSRM.OSRM.customize">
<code class="sig-name descname">customize</code><span class="sig-paren">(</span><em class="sig-param">osrm_file</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSRM.html#OSRM.customize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSRM.OSRM.customize" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <cite>osrm-customize</cite> on a .osrm file</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.OSRM.OSRM.extract">
<code class="sig-name descname">extract</code><span class="sig-paren">(</span><em class="sig-param">osm_path</em>, <em class="sig-param">profile_path</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSRM.html#OSRM.extract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSRM.OSRM.extract" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <cite>osrm-extract</cite> with a path to the osm route network and lua profile.</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.OSRM.OSRM.get_version">
<code class="sig-name descname">get_version</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSRM.html#OSRM.get_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSRM.OSRM.get_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Return OSRM binaries version</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.OSRM.OSRM.partition">
<code class="sig-name descname">partition</code><span class="sig-paren">(</span><em class="sig-param">osrm_file</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSRM.html#OSRM.partition"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSRM.OSRM.partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <cite>osrm-partition</cite> for a .osrm file</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.OSRM.OSRM.routed">
<code class="sig-name descname">routed</code><span class="sig-paren">(</span><em class="sig-param">osrm_file</em>, <em class="sig-param">ready_callback</em>, <em class="sig-param">done_callback</em>, <em class="sig-param">verbose=False</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/OSRM.html#OSRM.routed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.OSRM.OSRM.routed" title="Permalink to this definition">¶</a></dt>
<dd><p>Call <cite>osrm-routed</cite> on a .osrm file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>osrm_file</strong> (<em>str</em>) – Path to <a href="#id10"><span class="problematic" id="id11">*</span></a>.osrm</p></li>
<li><p><strong>ready_callback</strong> (<em>function</em>) – Function to be called when osrm-routed is ready for HTTP requests</p></li>
<li><p><strong>done_callback</strong> (<em>function</em>) – Function to be called when osrm-routed has exited</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – <cite>osrm-routed</cite> output is so verbose it is default off even if the parent class <cite>verbose=True</cite>. Set this to true if you want to see <cite>osrm-routed</cite> output anyway.</p></li>
<li><p><strong>**kwargs</strong> – Any additional parameters to be passed to osrm-routed</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<hr class="docutils" />
<div class="section" id="analysis-plugins">
<h1>Analysis Plugins<a class="headerlink" href="#analysis-plugins" title="Permalink to this headline">¶</a></h1>
<p>Analysis plugins are classes written on top of the <cite>tebetebe</cite> base classes to automate
routing analysis</p>
<div class="section" id="tb-analysis-accessisochrone">
<h2>tb.analysis.AccessIsochrone<a class="headerlink" href="#tb-analysis-accessisochrone" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-tebetebe.analysis.AccessIsochrone"></span><dl class="class">
<dt id="tebetebe.analysis.AccessIsochrone.AccessIsochrone">
<em class="property">class </em><code class="sig-prename descclassname">tebetebe.analysis.AccessIsochrone.</code><code class="sig-name descname">AccessIsochrone</code><span class="sig-paren">(</span><em class="sig-param">scenario</em>, <em class="sig-param">point_origin</em>, <em class="sig-param">points_grid=500</em>, <em class="sig-param">size=0.4</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/AccessIsochrone.html#AccessIsochrone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.AccessIsochrone.AccessIsochrone" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">osrm.extra.AccessIsochrone</span></code></p>
<p>Compute an access isochrone from an origin point with a given <cite>ScenarioAPI</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scenario</strong> (<a class="reference internal" href="tebetebe.html#tebetebe.Scenario.Scenario" title="tebetebe.Scenario.Scenario"><em>Scenario</em></a>) – Scenario to be queried for access isochrone</p></li>
<li><p><strong>point_origin</strong> (<em>2-floats tuple</em>) – The coordinates of the center point to use as (x, y).</p></li>
<li><p><strong>points_grid</strong> (<em>int</em>) – The number of points of the underlying grid to use.</p></li>
<li><p><strong>size</strong> (<em>float</em>) – Search radius (in wgs84 degrees)</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="tebetebe.analysis.AccessIsochrone.AccessIsochrone.get_center">
<code class="sig-name descname">get_center</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/AccessIsochrone.html#AccessIsochrone.get_center"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.AccessIsochrone.AccessIsochrone.get_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Return center point used in isochrone calculations</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.analysis.AccessIsochrone.AccessIsochrone.get_durations">
<code class="sig-name descname">get_durations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/AccessIsochrone.html#AccessIsochrone.get_durations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.AccessIsochrone.AccessIsochrone.get_durations" title="Permalink to this definition">¶</a></dt>
<dd><p>Return durations table retrieved from OSRM</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.analysis.AccessIsochrone.AccessIsochrone.get_grid">
<code class="sig-name descname">get_grid</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/AccessIsochrone.html#AccessIsochrone.get_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.AccessIsochrone.AccessIsochrone.get_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return GeoDataFrame of grid used in duration calculations, snapped to the road network</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.analysis.AccessIsochrone.AccessIsochrone.render_contour">
<code class="sig-name descname">render_contour</code><span class="sig-paren">(</span><em class="sig-param">n_levels</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/AccessIsochrone.html#AccessIsochrone.render_contour"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.AccessIsochrone.AccessIsochrone.render_contour" title="Permalink to this definition">¶</a></dt>
<dd><p>Return GeoDataFrame of MultiPolygon contours for a specified number of levels</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="tb-analysis-parallelscenarios">
<h2>tb.analysis.ParallelScenarios<a class="headerlink" href="#tb-analysis-parallelscenarios" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-tebetebe.analysis.ParallelScenarios"></span><dl class="class">
<dt id="tebetebe.analysis.ParallelScenarios.ParallelScenarios">
<em class="property">class </em><code class="sig-prename descclassname">tebetebe.analysis.ParallelScenarios.</code><code class="sig-name descname">ParallelScenarios</code><span class="sig-paren">(</span><em class="sig-param">*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/ParallelScenarios.html#ParallelScenarios"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.ParallelScenarios.ParallelScenarios" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Context manager for serving multiple scenarios in parallel. This can be useful for
comparing routing analysis from multiple scenarios side by side.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args</strong> – Arbitrary number of scenarios to be compiled, then executed in parallel</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="tb-analysis-routecomparison">
<h2>tb.analysis.RouteComparison<a class="headerlink" href="#tb-analysis-routecomparison" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-tebetebe.analysis.RouteComparison"></span><dl class="class">
<dt id="tebetebe.analysis.RouteComparison.RouteComparison">
<em class="property">class </em><code class="sig-prename descclassname">tebetebe.analysis.RouteComparison.</code><code class="sig-name descname">RouteComparison</code><span class="sig-paren">(</span><em class="sig-param">origins</em>, <em class="sig-param">dests</em>, <em class="sig-param">origins_id_col=None</em>, <em class="sig-param">dests_id_col=None</em>, <em class="sig-param">cache=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/RouteComparison.html#RouteComparison"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.RouteComparison.RouteComparison" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Compare route differences between scenarios</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>origins</strong> (<a class="reference internal" href="tebetebe.html#tebetebe.POIDataset.POIDataset" title="tebetebe.POIDataset.POIDataset"><em>POIDataset</em></a>) – Points to be used as the origins in route comparison</p></li>
<li><p><strong>dests</strong> (<a class="reference internal" href="tebetebe.html#tebetebe.POIDataset.POIDataset" title="tebetebe.POIDataset.POIDataset"><em>POIDataset</em></a>) – Points to be used as the destinations in route comparison</p></li>
<li><p><strong>origins_id_col</strong> (<em>str</em><em>, </em><em>optional</em>) – Column in <cite>origins</cite> dataset to be used as ID. Must be unique. If not specified, the index will be used</p></li>
<li><p><strong>dests_id_col</strong> (<em>str</em><em>, </em><em>optional</em>) – Column in <cite>dests</cite> dataset to be used as ID. Must be unique. If not specified, the index will be used</p></li>
<li><p><strong>cache</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether to cache time matrices</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="tebetebe.analysis.RouteComparison.RouteComparison.get_difference">
<code class="sig-name descname">get_difference</code><span class="sig-paren">(</span><em class="sig-param">scenario0</em>, <em class="sig-param">scenario1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/RouteComparison.html#RouteComparison.get_difference"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.RouteComparison.RouteComparison.get_difference" title="Permalink to this definition">¶</a></dt>
<dd><p>Get DF of origin:dest pairs whos routes differ between scenarios</p>
</dd></dl>

<dl class="method">
<dt id="tebetebe.analysis.RouteComparison.RouteComparison.get_duration_matrix">
<code class="sig-name descname">get_duration_matrix</code><span class="sig-paren">(</span><em class="sig-param">scenario</em>, <em class="sig-param">melted=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/RouteComparison.html#RouteComparison.get_duration_matrix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.RouteComparison.RouteComparison.get_duration_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate a duration matrix between <cite>origins</cite> and <cite>dests</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scenario</strong> (<a class="reference internal" href="tebetebe.html#tebetebe.Scenario.Scenario" title="tebetebe.Scenario.Scenario"><em>Scenario</em></a>) – Scenario to run calculate the duration matrix on</p></li>
<li><p><strong>melted</strong> (<em>bool</em><em>, </em><em>optional</em>) – Whether the matrix should be returned as a matrix DF, or melted into <cite>origin_id</cite> <cite>dest_id</cite> and <cite>duration</cite> columns</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Duration Matrix DataFrame</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tebetebe.analysis.RouteComparison.RouteComparison.get_duration_table">
<code class="sig-name descname">get_duration_table</code><span class="sig-paren">(</span><em class="sig-param">*args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/RouteComparison.html#RouteComparison.get_duration_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.RouteComparison.RouteComparison.get_duration_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Get route duration table for multiple scenarios</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>*args</strong> – Arbitrary number of scenarios to run duration table</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DF of origin:dest pairs and durations for each scenario</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tebetebe.analysis.RouteComparison.RouteComparison.get_routes">
<code class="sig-name descname">get_routes</code><span class="sig-paren">(</span><em class="sig-param">scenario</em>, <em class="sig-param">od_pairs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/RouteComparison.html#RouteComparison.get_routes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.RouteComparison.RouteComparison.get_routes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get routes between origins and dests</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scenario</strong> (<a class="reference internal" href="tebetebe.html#tebetebe.Scenario.Scenario" title="tebetebe.Scenario.Scenario"><em>Scenario</em></a>) – Scenario on which the origin:dest routes will be calculated</p></li>
<li><p><strong>od_pairs</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – DataFrame of origin:dest pairs in two columns <cite>origin_id</cite> and <cite>dest_id</cite> for calculation. If not specified, all pairwise origin:dest routes will be calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>GDF with duration, distance, and route geometry for each origin:dest pair</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>GeoDataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tebetebe.analysis.RouteComparison.RouteComparison.get_same">
<code class="sig-name descname">get_same</code><span class="sig-paren">(</span><em class="sig-param">scenario0</em>, <em class="sig-param">scenario1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tebetebe/analysis/RouteComparison.html#RouteComparison.get_same"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tebetebe.analysis.RouteComparison.RouteComparison.get_same" title="Permalink to this definition">¶</a></dt>
<dd><p>Get DF of origin:dest pairs whos routes are the same between scenarios</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, 1papaya

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>